---
title: nodejs中的流Stream
date: 2022-02-26 15:15:59
tags:
---
### nodejs中的流Stream
> 了解一下stream，平时用nodejs写的接口，或者文件上传等，其原理都是流，所以很有必要仔细了解流的原理。

#### 一、自己的理解
在处理数据时，可能需要经过多个步骤。比如编译一段代码，需要先读取文件，然后遍历文件中的字符，解析后再写入新的文件中。这个过程可以有两种方式去实现。第一种，直接读取整个文件，读取完成再遍历并生成编译结果，然后再写入新的文件。另一种是，一遍读取文件，读取成功的部分先拿去编译，编译的同时进行编译结果的写入。这样就能充分利用多个io操作的并发进行，同时也能减少内存占用。第二种方式就是流的使用。流是一种编程设计模式，在多种语言都有实现。

#### 二、nodejs中流的分类
分为可读流、可写流、双工流、Transform、throwFlow。
双工流和Transform的区别：双工流中的可读和可写是分开并独立的。Transform读入并经过处理后，可以作为可读数据输出。
throwFlow主要作为管道监控，或者作为一个代理管道，可以在被read的时候，再去建立真正需要的流，从而防止一开始就建立多个流，最终导致打开了过多文件而报错。

#### 三、流的组合和并发执行
各个流可以并发执行，而不需要同步运行。这个需要在read中建立流，并马上done，不等待流的运行。
流也可以组合起来，变成另外一个流供控制。


